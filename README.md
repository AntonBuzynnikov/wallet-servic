# Сервис кошелёк (Wallet-Service) #
Сервис для управления балансом кошелька. Проект написан на Java с использованием фреймворка Spring Boot.
## Описание проекта ##
Данный проект реализует простое RESTful API для управления балансом кошелей пользователей. Основные функциональные возможности включают:
* Просмотр текущего баланса по номеру кошелька.
* Пополнение и снятие денежных средств с кошелька.
* Безопасное управление изменениями баланса в условиях многопоточности.

<br>  Сервис построен с учётом принципов отказоустойчивости и производительности. Код сопровожден документацией и комментариями для лучшего понимания архитектуры и функциональных деталей.

## Требования ##

* Java 17+
* Apache Maven
* PostgreSQL (рекомендуемая версия 16+)
* Docker (для быстрого старта)

## Установка и запуск ##

Для установки и запуска сервиса выполните следующие шаги:

### 1. Скачать исходный код: ###

> git clone https://github.com/AntonBuzynnikov/wallet-servic.git
> cd wallet-servic

### 2. Выполнить команду для сборки проекта: ###
> mvn clean package

### 3. Собрать образ Docker из Dockerfile ###
> docker build -t {имя_образа} .

### 4. Запустить Docker-compose: ###
Предварительно измените параметр **services.app.image** на **имя_образа**
> docker compose up

Проект имеет базовые настройки для запуска, поэтому дополнительной настройки не требуется

Если необходимо, можете изменить переменные окружение Spring Boot, такие как:
> SPRING_DATASOURCE_URL
> SPRING_DATASOURCE_USERNAME
> SPRING_DATASOURCE_PASSWORD

Со списком все параметров можно ознакомиться в документации к Spring.

## Тестирование ##

Тестируйте сервис с помощью curl или Postman:
### 1. Баланс кошелька: ###
> GET http://{HOST}:{PORT}/api/v1/wallet/{walletId}

Параметр **walletId** имеет тип UUID.
Конечная точная возвращает ответ в виде JSON
> Status: 200
```
{
   "balance": 0.00
}
```

### 2. Пополнение/снятие средств ###
> PATCH http://{HOST}:{PORT}/api/v1/wallet<br>
```
{
   "walletId":{walletId}, <br>
   "operationType": "DEPOSIT"/"WITHDRAW", 
   "amount": {amount}
}
```
Конечная точка обрабатывает ответ асинхронно, возвращает **Status 204**

### Возможные ошибки: ###
1. **Кошелёк не найден:** возвращает **Status 404** и описание ошибки
2. **Некорректный тип операции:** возникает из-за неправильного указания типа операции. Возвращает **Status 400** и описание ошибки
3. **Некорректный запрос:** возникает из-за неправильных данных у параметров **walletId** и **amount**. Возвращает **Status 400** и описание ошибки
4. **Недостаточно средств на балансе:** возвращает **Status 400** и описание ошибки

## Поддерживаемые технологии ##

* Spring Boot
* Hibernate/JPA
* Docker/Docker Compose
* PostgreSQL

## Авторство ##
Автор проекта: Антон Бузынников.

*********************

Спасибо за интерес к проекту! Надеюсь, он окажется полезным для ваших целей. Если возникнут вопросы или пожелания, не стесняйтесь оставлять issues в репозитории.


